(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48bb603b"],{1:function(t,e){},"1a3f":function(t,e,o){"use strict";var a,r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"createPost-container"},[o("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:t.postForm,rules:t.rules}},[o("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar "+t.postForm.status}},[o("div",{staticClass:"row-box margin-top"},[o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:t.submitForm}},[t._v("发布")]),t._v(" "),o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"warning"},on:{click:t.draftForm}},[t._v("保存草稿")])],1)]),t._v(" "),o("div",{staticClass:"createPost-main-container"},[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{prop:"title"}},[o("MDinput",{attrs:{maxlength:100,name:"name",required:""},model:{value:t.postForm.projectName,callback:function(e){t.$set(t.postForm,"projectName",e)},expression:"postForm.projectName"}},[t._v("项目名称")])],1),t._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{label:"项目描述:"}},[o("el-row",[o("el-input",{staticClass:"article-textarea",attrs:{rows:1,type:"textarea",autosize:"",placeholder:"项目描述"},model:{value:t.postForm.description1,callback:function(e){t.$set(t.postForm,"description1",e)},expression:"postForm.description1"}})],1),t._v(" "),o("el-row",[o("el-input",{staticClass:"article-textarea",attrs:{rows:1,type:"textarea",autosize:"",placeholder:"项目描述"},model:{value:t.postForm.description2,callback:function(e){t.$set(t.postForm,"description2",e)},expression:"postForm.description2"}})],1),t._v(" "),o("el-row",[o("el-input",{staticClass:"article-textarea",attrs:{rows:1,type:"textarea",autosize:"",placeholder:"项目描述"},model:{value:t.postForm.description3,callback:function(e){t.$set(t.postForm,"description3",e)},expression:"postForm.description3"}})],1)],1)],1)],1),t._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{label:"设计者和交付时间:"}},[o("el-row",[o("el-input",{staticClass:"article-textarea",attrs:{rows:1,type:"textarea",autosize:"",placeholder:"请输入设计者和交付时间"},model:{value:t.postForm.designer,callback:function(e){t.$set(t.postForm,"designer",e)},expression:"postForm.designer"}})],1)],1),t._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{label:"设计理念:"}},[o("el-row",[o("el-input",{staticClass:"article-textarea",attrs:{rows:1,type:"textarea",autosize:"",placeholder:"请输入项目设计理念"},model:{value:t.postForm.idea,callback:function(e){t.$set(t.postForm,"idea",e)},expression:"postForm.idea"}})],1)],1),t._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{label:"建设规模:"}},[o("el-row",[o("el-input",{staticClass:"article-textarea",attrs:{rows:1,type:"textarea",autosize:"",placeholder:"请输入项目建设规模"},model:{value:t.postForm.area,callback:function(e){t.$set(t.postForm,"area",e)},expression:"postForm.area"}})],1)],1),t._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{label:"项目类型:"}},[o("el-row",[o("el-input",{staticClass:"article-textarea",attrs:{rows:1,type:"textarea",autosize:"",placeholder:"请输入项目类型"},model:{value:t.postForm.projectType,callback:function(e){t.$set(t.postForm,"projectType",e)},expression:"postForm.projectType"}})],1)],1),t._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{label:"建设位置:"}},[o("el-row",[o("el-input",{staticClass:"article-textarea",attrs:{rows:1,type:"textarea",autosize:"",placeholder:"请输入项目建设规模"},model:{value:t.postForm.address,callback:function(e){t.$set(t.postForm,"address",e)},expression:"postForm.address"}})],1)],1),t._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"30px"},attrs:{prop:"picSrc",label:"封面图片"}},[o("Upload",{model:{value:t.postForm.picSrc,callback:function(e){t.$set(t.postForm,"picSrc",e)},expression:"postForm.picSrc"}})],1),t._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"30px","margin-top":"20px"},attrs:{prop:"content"}},[o("Tinymce",{ref:"editor",attrs:{height:600},model:{value:t.postForm.htmlContent,callback:function(e){t.$set(t.postForm,"htmlContent",e)},expression:"postForm.htmlContent"}})],1)],1)],1)],1)},s=[],i=o("bd86"),n=o("db72"),l=o("8256"),c=o("70a2"),p=o("1aba"),m=o("b804"),u=o("24d2"),d=o("2f62"),f=o("4fd1"),h={status:"draft",projectName:"",description:"",designer:"",area:"",picSrc:"",idea:"",id:void 0,htmlContent:""},b=(a={name:"ProjectDetail",components:{Tinymce:l["a"],MDinput:p["a"],Upload:c["a"],Sticky:m["a"],VideoPlayerComponent:f["a"]},props:{isEdit:{type:Boolean,default:!1},articleType:{type:String,default:""}},computed:{picSrc:function(){return this.postForm.picSrc}},data:function(){var t=this,e=function(e,o,a){if(a(),""===o){var r="";"title"===e.field&&(r="标题"),t.$message({message:r+"为必传项",type:"error"}),a(new Error(r+"为必传项"))}else a()},o=function(e,o,a){o?validURL(o)?a():(t.$message({message:"外链url填写不正确",type:"error"}),a(new Error("外链url填写不正确"))):a()};return{postForm:Object.assign({},h),loading:!1,userListOptions:[],rules:{picSrc:[{validator:e}],title:[{validator:e}],content:[{validator:e}],source_uri:[{validator:o,trigger:"blur"}]},tempRoute:{}}}},Object(i["a"])(a,"computed",{visitViews:function(){return this.$store.state.tagViewData.visitViews},contentShortLength:function(){return this.postForm.articleSummary.length},displayTime:{get:function(){return+new Date(this.postForm.display_time)},set:function(t){this.postForm.display_time=new Date(t)}}}),Object(i["a"])(a,"created",function(){if(this.isEdit){var t=this.$route.params&&this.$route.params.id;this.fetchData(t,this.articleType)}else this.postForm=Object.assign({},h);this.tempRoute=Object.assign({},this.$route)}),Object(i["a"])(a,"methods",Object(n["a"])({},Object(d["c"])("tagViewData",["DEL_VIEW","DEL_CACHED"]),{fetchData:function(t){var e=this;Object(u["a"])(t).then(function(t){console.log("response data",t.data),e.postForm=t.data,console.log("post form",e.postForm),e.setTagsViewTitle(),e.setPageTitle()}).catch(function(t){console.log(t)})},setTagsViewTitle:function(){var t="编辑-",e={title:"".concat(t,"-").concat(this.postForm.projectName.substr(0,4),"..."),path:this.tempRoute.fullPath};this.$store.dispatch("tagViewData/updateVisitedView",e)},setPageTitle:function(){var t="Edit Article";document.title="".concat(t," - ").concat(this.postForm.id)},closeSelectedTag:function(t){this.DEL_VIEW(t),this.DEL_CACHED(t);var e=this.visitViews.slice(-1)[0];e?this.$router.push(e.path):this.$router.push("/")},submitForm:function(){var t=this;console.log(this.postForm),this.postForm.articleStatus="published",this.$refs.postForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("=====submit=====",t.postForm),Object(u["c"])(t.postForm).then(function(){t.loading=!0,t.$notify({title:"成功",message:"发布项目信息成功",type:"success",duration:2e3}),t.loading=!1,t.closeSelectedTag(t.$route.path)})})},draftForm:function(){var t=this;console.log(this.postForm),this.postForm.articleStatus="draft",this.$refs.postForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("=====submit=====",t.postForm),Object(u["c"])(t.postForm).then(function(){t.loading=!0,t.$notify({title:"成功",message:"保存草稿成功",type:"success",duration:2e3}),t.loading=!1,t.closeSelectedTag(t.$route.path)})})}})),a),g=b,v=(o("dc0d"),o("2877")),F=Object(v["a"])(g,r,s,!1,null,"9acd019e",null);e["a"]=F.exports},"24d2":function(t,e,o){"use strict";o.d(e,"a",function(){return r}),o.d(e,"c",function(){return s}),o.d(e,"b",function(){return i});var a=o("b775");function r(t){return Object(a["a"])({url:"/project/get",method:"get",params:{id:t}})}function s(t){return Object(a["a"])({url:"/project/detail",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/project/list",method:"get"})}},"894d":function(t,e,o){},d9bb:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ProjectDetail",{attrs:{"is-edit":!1,articleType:"ideaArticle"}})},r=[],s=o("1a3f"),i={name:"CreateForm",components:{ProjectDetail:s["a"]}},n=i,l=o("2877"),c=Object(l["a"])(n,a,r,!1,null,null,null);e["default"]=c.exports},dc0d:function(t,e,o){"use strict";var a=o("894d"),r=o.n(a);r.a}}]);